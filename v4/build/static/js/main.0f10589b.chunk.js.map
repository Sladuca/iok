{"version":3,"sources":["constants.js","Landing.js","NavBar.js","IokGraph.js","IokText.js","SignedIn.js","App.js","index.js"],"names":["appConfig","AppConfig","DEFL_GRAPH_ELEMENTS","nodes","data","id","edges","source","target","DEFL_GRAPH_STYLE","selector","style","background-color","content","width","target-arrow-shape","line-color","target-arrow-color","curve-style","transition-property","transition-duration","Landing","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","userSession","UserSession","e","preventDefault","redirectToSignIn","react_default","a","createElement","className","onClick","signIn","bind","Component","NavBar","username","props","Link","to","signOut","Cytoscape","use","dagre","layout","name","IokGraph","saveGraph","elements","styles","state","cyLoaded","cy","react_cytoscape_default","CytoscapeComponent","normalizeElements","stylesheet","IokText","SignedIn","graphElements","graphStyles","savingGraph","gotGraph","loadGraph","assertThisInitialized","console","log","_this2","getFile","decrypt","then","graph","JSON","parse","length","setState","alert","_this3","putFile","stringify","encrypt","finally","signUserOut","window","location","loadUserData","pathname","Redirect","concat","src_NavBar","react_split_es","sizes","gutterStyle","dimension","gutterSize","height","minSize","expandToMin","gutterAlign","snapOffset","dragInterval","direction","cursor","IokGraph_IokGraph","key","IokText_IokText","App","session","isUserSignedIn","isSignInPending","handlePendingSignIn","userData","Error","src_SignedIn","src_Landing","ReactDOM","render","BrowserRouter","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.0f10589b.chunk.js","sourcesContent":["import { AppConfig } from 'blockstack'\n\nexport const appConfig = new AppConfig(['store_write', 'publish_data'])\n\nexport const GRAPH_FILENAME = 'graph.json'\n\nexport const IOKS = []\n\nexport const DEFL_GRAPH_ELEMENTS = {\n    nodes: [\n      { data: { id: 'n0' } },\n      { data: { id: 'n1' } },\n      { data: { id: 'n2' } },\n      { data: { id: 'n3' } },\n      { data: { id: 'n4' } },\n      { data: { id: 'n5' } },\n      { data: { id: 'n6' } },\n      { data: { id: 'n7' } },\n      { data: { id: 'n8' } },\n      { data: { id: 'n9' } },\n      { data: { id: 'n10' } },\n      { data: { id: 'n11' } },\n      { data: { id: 'n12' } },\n      { data: { id: 'n13' } },\n      { data: { id: 'n14' } },\n      { data: { id: 'n15' } },\n      { data: { id: 'n16' } }\n    ],\n    edges: [\n      { data: { source: 'n0', target: 'n1' } },\n      { data: { source: 'n1', target: 'n2' } },\n      { data: { source: 'n1', target: 'n3' } },\n      { data: { source: 'n4', target: 'n5' } },\n      { data: { source: 'n4', target: 'n6' } },\n      { data: { source: 'n6', target: 'n7' } },\n      { data: { source: 'n6', target: 'n8' } },\n      { data: { source: 'n8', target: 'n9' } },\n      { data: { source: 'n8', target: 'n10' } },\n      { data: { source: 'n11', target: 'n12' } },\n      { data: { source: 'n12', target: 'n13' } },\n      { data: { source: 'n13', target: 'n14' } },\n      { data: { source: 'n13', target: 'n15' } },\n    ]\n  }\n\nexport const DEFL_GRAPH_STYLE = [\n    {\n      selector: 'node',\n      style: {\n        'background-color': '#11479e',\n        'content': 'data(id)'\n      }\n    },\n    {\n      selector: 'edge',\n      style: {\n        'width': 4,\n        'target-arrow-shape': 'triangle',\n        'line-color': '#9dbaea',\n        'target-arrow-color': '#9dbaea',\n        'curve-style': 'bezier'\n      }\n    },\n    {\n      selector: '.selected',\n      style: {\n        'background-color': '#E8747C'\n      } \n    },\n    {\n      selector: '.highlighted',\n      style: {\n        'background-color': '#75b5aa',\n        'line-color': '#75b5aa',\n        'target-arrow-color': '#75b5aa',\n        'transition-property': 'background-color, line-color, target-arrow-color',\n        'transition-duration': '0.5s'\n      }\n    },\n    {\n      selector: '.altHighlighted',\n      style: {\n        'background-color': '#E8747C',\n        'line-color': '#E8747C',\n        'target-arrow-color': '#E8747C',\n        'transition-property': 'background-color, line-color, target-arrow-color',\n        'transition-duration': '0.5s'\n      }\n    }\n  ]","import React, { Component } from 'react'\nimport { UserSession } from 'blockstack'\nimport { appConfig } from './constants'\nimport './styles/Landing.css'\n\nclass Landing extends Component {\n\n  constructor() {\n    super()\n    this.userSession = new UserSession({ appConfig })\n  }\n\n  signIn(e) {\n    e.preventDefault()\n    this.userSession.redirectToSignIn()\n  }\n\n  render() {\n    return (\n      <div className=\"Landing\">\n        <div className=\"form-signin\">\n          <h1 className=\"h1 mb-3 font-weight-normal\">Index of Knowledge</h1>\n          <button\n            className=\"btn btn-lg btn-primary btn-block\"\n            onClick={this.signIn.bind(this)}>Sign in with Blockstack\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Landing\n","import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\nimport './styles/NavBar.css'\n\nclass NavBar extends Component {\n\n  render() {\n    const username = this.props.username\n    return (\n<nav className=\"navbar navbar-expand-md navbar-dark bg-blue fixed-top\">\n<Link className=\"navbar-brand\" to=\"/\">Index of Knowledge</Link>\n\n<ul className=\"navbar-nav mr-auto\">\n  <li className=\"nav-item\">\n    <Link className=\"nav-link\" to='/me'>{username}</Link>\n  </li>\n</ul>\n<button\n  className=\"btn btn-primary\"\n  onClick={this.props.signOut.bind(this)}\n>Sign out\n</button>\n</nav>\n)\n}\n}\n\nexport default NavBar\n","import React, { Component } from 'react';\nimport Cytoscape from 'cytoscape';\nimport dagre from 'cytoscape-dagre';\nimport CytoscapeComponent from 'react-cytoscapejs';\n\nimport { DEFL_GRAPH_ELEMENTS, DEFL_GRAPH_STYLE } from './constants'\nimport './styles/IokGraph.css'\n\nCytoscape.use(dagre)\n\nconst layout = { name: 'dagre' };\n\nexport default class IokGraph extends Component {\n\n  constructor(props) {\n    super(props)\n    this.saveGraph = this.props.saveGraph\n    this.elements = this.props.elements ? this.props.elements : DEFL_GRAPH_ELEMENTS\n    this.styles = this.props.styles ? this.props.styles : DEFL_GRAPH_STYLE\n    this.state = {\n      cyLoaded: false,\n      cy: null\n    }\n  }\n\n\n  render() {\n    return (\n      <CytoscapeComponent \n        className=\"graph\" \n        elements={CytoscapeComponent.normalizeElements(this.elements)} \n        stylesheet={this.styles}\n        layout={layout} \n      /> \n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './styles/IokText.css'\n\nexport default class IokText extends Component {\n\n  render() {\n    return (\n      <p className=\"iok-text\">\n          HELLELEOOOOOO\n      </p>\n    );\n  }\n}\n","import React, { Component } from 'react'\nimport { Redirect } from 'react-router-dom'\nimport { UserSession } from 'blockstack'\nimport Split from 'react-split'\n\nimport NavBar from './NavBar'\nimport IokGraph from './IokGraph'\nimport IokText from './IokText'\nimport { appConfig, GRAPH_FILENAME } from './constants'\nimport './styles/SignedIn.css'\n\nclass SignedIn extends Component {\n\n  constructor(props) {\n    super(props)\n    this.userSession = new UserSession({ appConfig })\n    this.state = {\n      graphElements: [], // tricky\n      graphStyles: {},\n      savingGraph: false,\n      gotGraph: false,\n      //selectedAnimal: false,\n      //selectedTerritory: false\n    }\n\n    this.loadGraph = this.loadGraph.bind(this)\n    this.saveGraph = this.saveGraph.bind(this)\n    this.signOut = this.signOut.bind(this)\n\n    // only want to do this once\n    console.log(\"Loading data from Gaia...\")\n    this.loadGraph()\n  }\n\n  loadGraph() {\n    const options = { decrypt: false }\n    this.userSession.getFile(GRAPH_FILENAME, options)\n    .then((content) => {\n      if(content) {\n        const graph = JSON.parse(content)\n        console.log('Loaded data:', graph)\n\n        // graph has dummy default style. get rid of it\n        if (!graph.style || graph.style.length <= 1) {\n          graph.style = null\n        }\n        this.setState({\n          graphElements: graph.elements, \n          graphStyles: graph.style, \n          gotGraph: true\n        })\n      } else {\n        alert('Failed to get graph data...')\n      }\n    })\n  }\n\n  saveGraph(graph) {\n    this.setState({graph, savingGraph: true})\n    const options = { encrypt: false }\n    this.userSession.putFile(GRAPH_FILENAME, JSON.stringify(graph), options)\n    .finally(() => {\n      this.setState({savingGraph: false, gotGraph: false})\n    })\n  }\n\n  signOut(e) {\n    e.preventDefault()\n    this.userSession.signUserOut()\n    window.location = '/'\n  }\n\n  render() {\n    const username = this.userSession.loadUserData().username\n\n    if(window.location.pathname === '/') {\n      return (\n        <Redirect to={`/iok/${username}`} />\n      )\n    }\n\n    return (\n      <div className=\"SignedIn\">\n        <NavBar className=\"nav-parent\" username={username} signOut={this.signOut}/>\n        <Split className=\"split-parent\" \n            sizes={[75, 25]}\n            gutterStyle={function(dimension, gutterSize) { // override somehow\n              return {\n                  'width': '8px',\n                  'height': '90vh',\n                }\n            }}\n            minSize={100}\n            expandToMin={false}\n            gutterSize={10}\n            gutterAlign=\"center\"\n            snapOffset={30}\n            dragInterval={1}\n            direction=\"horizontal\"\n            cursor=\"col-resize\"\n        >\n            {/* first split */}\n            <div className=\"split split-horizontal\">\n              <IokGraph \n                className=\"split content\"\n                elements={this.state.graphElements} \n                styles={this.state.graphStyles}\n                saveGraph={this.saveGraph} \n                key={this.state.graphElements}\n              />\n            </div>\n\n            {/* second split */}\n            <div className=\"split split-horizontal\">\n              <IokText className=\"split content\"></IokText>\n            </div>\n        </Split>\n      </div>\n    );\n  }\n}\n\nexport default SignedIn\n","import React, { Component } from 'react'\nimport './styles/App.css'\nimport { UserSession } from 'blockstack'\n\nimport Landing from './Landing'\nimport SignedIn from './SignedIn'\n\nclass App extends Component {\n\n  constructor() {\n    super()\n    this.userSession = new UserSession()\n\n    // moved from deprecated\n    const session = this.userSession\n    if(!session.isUserSignedIn() && session.isSignInPending()) {\n      session.handlePendingSignIn()\n      .then((userData) => {\n        if(!userData.username) {\n          throw new Error('This app requires a username.')\n        }\n        window.location = `/iok/${userData.username}`\n      })\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"site-wrapper\">\n        {this.userSession.isUserSignedIn() ?\n          <SignedIn />\n        :\n          <Landing />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom'\nimport App from './App.js';\n\n// Require Sass file so webpack can build it\nimport 'bootstrap/dist/css/bootstrap.css';\nimport'./styles/style.css';\n\nReactDOM.render(<BrowserRouter><App /></BrowserRouter>, document.getElementById('root'));"],"sourceRoot":""}